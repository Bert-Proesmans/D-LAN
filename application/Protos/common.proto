/**
  * Some common messages.
  * Version : 1
  * All string are encoded in UTF-8.
  */

package Protos.Common;

// For identify a chunk or a user.
message Hash {
   required bytes hash = 1; // 20 bytes
}

// Used for a directory or a file.
message Entry {
   required string path = 1; // Absolute path. For example : "D:\My Videos\My cat"
   required string name = 2; // Directory name or file name. For example : "MyLOLCat.avi"
   required uint64 size = 3; // [bytes].
}

message DirEntry {
   required Entry dir = 1;
}

message FileEntry {
   required Entry file = 1;
   repeated Hash chunks = 2; // No chunk means that the peer doesn't know the hashes.
}

// A result following a search.
// See 'Network.Find' and 'GUI.GUINetwork' for more information.
message FindResult {
   message DirEntryLevel {
      required uint32 level = 1;
      required DirEntry dir = 2;
   }
   message FileEntryLevel {
      required uint32 level = 1;
      required FileEntry dir = 2;
   }
   required uint64 tag = 1;
   repeated DirEntryLevel dirs = 2;
   repeated FileEntryLevel files = 3;
}